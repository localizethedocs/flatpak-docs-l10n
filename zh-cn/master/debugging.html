<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="./">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Debugging" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.flatpak.org/en/debugging.html" />
<meta property="og:site_name" content="Flatpak" />
<meta property="og:description" content="This section includes documentation on how to debug Flatpak apps. Debug packages: Before debugging, it is essential to install the debug packages used by the application. This can be done by: This ..." />
<meta property="og:image:width" content="1146" />
<meta property="og:image:height" content="600" />
<meta property="og:image" content="https://docs.flatpak.org/en/latest/_images/social_previews/summary_debugging_3db191db.png" />
<meta property="og:image:alt" content="This section includes documentation on how to debug Flatpak apps. Debug packages: Before debugging, it is essential to install the debug packages used by the application. This can be done by: This ..." />
<meta name="description" content="This section includes documentation on how to debug Flatpak apps. Debug packages: Before debugging, it is essential to install the debug packages used by the application. This can be done by: This ..." />
<meta name="twitter:card" content="summary_large_image" />
<link rel="index" title="ç´¢å¼•" href="genindex.html"><link rel="search" title="æœç´¢" href="search.html"><link rel="next" title="Publishing" href="publishing.html"><link rel="prev" title="Extensions" href="extension.html">
        <link rel="canonical" href="https://projects.localizethedocs.org/flatpak-docs-l10n/debugging.html">

    <link rel="shortcut icon" href="_static/favicon.ico"><!-- Generated with Sphinx 8.1.3 and Furo 2025.12.19 -->
        <title>Debugging - Flatpak æ–‡æ¡£</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=7bdb33bb" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="_static/xdg.css?v=d059aca2" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style>

<script type="text/javascript" src="ltd-provenance.js"></script>
<script type="text/javascript" src="ltd-current.js"></script>
<script type="text/javascript" src="../../ltd-config.js"></script>
<script type="text/javascript" src="../../ltd-flyout.js"></script>
</head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Flatpak  æ–‡æ¡£</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <span class="sidebar-brand-text">Flatpak  æ–‡æ¡£</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="æœç´¢" name="q" aria-label="æœç´¢">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to Flatpak</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="getting-started.html">Getting Started</a><input aria-label="Toggle navigation of Getting Started" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="basic-concepts.html">Basic concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="using-flatpak.html">Using Flatpak</a></li>
<li class="toctree-l2"><a class="reference internal" href="first-build.html">Building your first Flatpak</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="building.html">Building</a><input aria-label="Toggle navigation of Building" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="building-introduction.html">Building Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="conventions.html">Requirements &amp; Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="dependencies.html">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="flatpak-builder.html">Flatpak Builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="manifests.html">Manifests</a></li>
<li class="toctree-l2"><a class="reference internal" href="module-sources.html">Module Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="sandbox-permissions.html">Sandbox Permissions</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="guides.html">Guides</a><input aria-label="Toggle navigation of Guides" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="python.html">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="electron.html">Electron</a></li>
<li class="toctree-l3"><a class="reference internal" href="dotnet.html">Dotnet</a></li>
<li class="toctree-l3"><a class="reference internal" href="qt.html">Qt</a></li>
<li class="toctree-l3"><a class="reference internal" href="multiarch.html">Multiarch support</a></li>
<li class="toctree-l3"><a class="reference internal" href="extension.html">Extensions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Debugging</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="publishing.html">Publishing</a><input aria-label="Toggle navigation of Publishing" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="repositories.html">Repositories</a></li>
<li class="toctree-l2"><a class="reference internal" href="hosting-a-repository.html">Hosting a repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="single-file-bundles.html">Single-file bundles</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb-drives.html">USB Drives</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="desktop-integration.html">Desktop Integration</a><input aria-label="Toggle navigation of Desktop Integration" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="portals.html">Portal support in GTK</a></li>
<li class="toctree-l2"><a class="reference internal" href="portals.html#portal-support-in-qt-and-kde">Portal support in Qt and KDE</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="flatpak-devel.html">Flatpak as a developer platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="tips-and-tricks.html">Tips and Tricks</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="reference.html">Reference Documentation</a><input aria-label="Toggle navigation of Reference Documentation" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="flatpak-command-reference.html">Flatpak Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="flatpak-builder-command-reference.html">Flatpak Builder Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="available-runtimes.html">Available Runtimes</a></li>
<li class="toctree-l2"><a class="reference internal" href="under-the-hood.html">Under the Hood</a></li>
<li class="toctree-l2"><a class="reference internal" href="libflatpak-api-reference.html">libflatpak API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="portal-api-reference.html">Portal API Reference</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/flatpak/flatpak-docs/blob/master/docs/debugging.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/flatpak/flatpak-docs/edit/master/docs/debugging.rst" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="debugging">
<h1>Debugging<a class="headerlink" href="#debugging" title="Link to this heading">ðŸ”—</a></h1>
<p>This section includes documentation on how to debug Flatpak apps.</p>
<section id="debug-packages">
<h2>Debug packages<a class="headerlink" href="#debug-packages" title="Link to this heading">ðŸ”—</a></h2>
<p>Before debugging, it is essential to install the debug packages used by
the application. This can be done by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak install --include-sdk --include-debug $FLATPAK_ID
</pre></div>
</div>
<p>This will install the SDK, the Debug SDK and the Debug extension for
the application.</p>
<p>If it's a crash in the graphics stack, the GL debug extension will also
be needed.</p>
<p>First, note down the runtime branch used by the application:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak info --show-runtime $FLATPAK_ID
org.freedesktop.Platform/x86_64/24.08
</pre></div>
</div>
<p>In the above example it is the Freedesktop SDK and the branch is
<code class="docutils literal notranslate"><span class="pre">24.08</span></code>. Then install the <code class="docutils literal notranslate"><span class="pre">GL.debug</span></code> extension for the above branch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak install org.freedesktop.Platform.{GL,GL32}.Debug.default//24.08
</pre></div>
</div>
<p>The same process should be followed for any extension or baseapp used
by the app.</p>
</section>
<section id="debug-shell">
<h2>Debug shell<a class="headerlink" href="#debug-shell" title="Link to this heading">ðŸ”—</a></h2>
<p>A debugging environment can be created by starting a shell inside the
sandbox:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak run --command=sh --devel --filesystem=$(pwd) $FLATPAK_ID
</pre></div>
</div>
<p>This creates a sandbox for the application with the given ID and, instead
of running the application, runs a shell inside the sandbox. The
<code class="docutils literal notranslate"><span class="pre">--devel</span></code> option tells Flatpak to use the SDK as the runtime, which
includes various debugging tools and it also adjusts the sandbox setup
to enable debugging.</p>
<p>It is also possible to get a shell inside an application sandbox without
having to install it. This is done using <code class="docutils literal notranslate"><span class="pre">flatpak-builder</span></code>'s <code class="docutils literal notranslate"><span class="pre">--run</span></code>
option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak-builder --run &lt;build-dir&gt; &lt;manifest&gt; sh
</pre></div>
</div>
<p>This sets up a sandbox that is populated with the build results found in
the build directory, and runs a shell inside it.</p>
</section>
<section id="using-gdb-in-the-sandbox">
<h2>Using GDB in the sandbox<a class="headerlink" href="#using-gdb-in-the-sandbox" title="Link to this heading">ðŸ”—</a></h2>
<p>Note that <a class="reference internal" href="#debug-packages"><span class="std std-ref">Debug packages</span></a> must be installed to get
meaningful traces from GDB. Once inside the <a class="reference internal" href="#debug-shell"><span class="std std-ref">Debug shell</span></a>
to run the application with <code class="docutils literal notranslate"><span class="pre">gdb</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gdb /app/bin/&lt;application-binary&gt;
</pre></div>
</div>
<p>To pass arguments to the application:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gdb --args /app/bin/&lt;application-binary&gt; &lt;arguments&gt;
$ (gdb) run
</pre></div>
</div>
<p>A breakpoint can also be set for example on the <code class="docutils literal notranslate"><span class="pre">main</span></code> function
and once it is reached the source code can be listed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ (gdb) break main
  (gdb) run
  (gdb) list
</pre></div>
</div>
<p>Once the bug is reproduced, if it is a crash it will automatically
return to the gdb prompt. In case of a freeze pressing Ctrl+c will cause
it to return to the gdb prompt. Now enable logging to a file (this will
be saved in the working directory and the Flatpak needs filesystem
access to that <code class="docutils literal notranslate"><span class="pre">--filesystem=$(pwd)</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ (gdb) set logging enabled on
</pre></div>
</div>
<p>Then to get the backtrace:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ (gdb) bt full
</pre></div>
</div>
<p>Or for all threads, in case of a multi-threaded program:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ (gdb) thread apply all backtrace
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">gdb</span></code> inside the sandbox cannot use debug symbols from
host's <a class="reference external" href="https://sourceware.org/elfutils/Debuginfod.html">debuginfod servers</a>.</p>
<p>Please also see the <a class="reference external" href="https://sourceware.org/gdb/current/onlinedocs/gdb.html/">GDB user manual</a>
for a more complete overview on how to use GDB.</p>
</section>
<section id="getting-stacktraces-from-a-crash">
<h2>Getting stacktraces from a crash<a class="headerlink" href="#getting-stacktraces-from-a-crash" title="Link to this heading">ðŸ”—</a></h2>
<p>If an application crashed and the system has coredumps and
<a class="reference external" href="https://www.freedesktop.org/software/systemd/man/latest/systemd-coredump.html#">systemd-coredump</a>
enabled, a coredump will be logged. Get the <code class="docutils literal notranslate"><span class="pre">PID</span></code> from that coredump:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ coredumpctl list
</pre></div>
</div>
<p>Now run <code class="docutils literal notranslate"><span class="pre">flatpak-coredumpctl</span></code> (this requires <a class="reference internal" href="#debug-packages"><span class="std std-ref">Debug packages</span></a>
to be installed):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak-coredumpctl -m &lt;PID&gt; $FLATPAK_ID
(gdb) bt full
</pre></div>
</div>
</section>
<section id="using-other-debugging-tools">
<h2>Using other debugging tools<a class="headerlink" href="#using-other-debugging-tools" title="Link to this heading">ðŸ”—</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">org.freedesktop.Sdk</span></code> also includes other debugging tools like
<a class="reference external" href="https://valgrind.org/">Valgrind</a> which is useful to find memory leaks.
Once inside the <a class="reference internal" href="#debug-shell"><span class="std std-ref">Debug shell</span></a>, it can be run with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ valgrind --leak-check=full --track-origins=yes --show-leak-kinds=all --log-file=&quot;valgrind.log&quot; /app/bin/&lt;application-binary&gt;
</pre></div>
</div>
<p><a class="reference external" href="https://strace.io/">Strace</a> can be useful to check what an application
is doing. For example, to trace <code class="docutils literal notranslate"><span class="pre">openat(),</span> <span class="pre">read()</span></code> calls:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ strace -e trace=openat,read -o strace.log -f /app/bin/&lt;application-binary&gt;
</pre></div>
</div>
<p><a class="reference external" href="https://perfwiki.github.io/main/">Perf</a> requires
access to <code class="docutils literal notranslate"><span class="pre">--filesystem=/sys</span></code> to run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak run --command=perf --filesystem=/sys --filesystem=$(pwd) --devel $FLATPAK_ID record -v -- &lt;command&gt;
</pre></div>
</div>
</section>
<section id="multiple-debug-shells-in-one-sandbox">
<h2>Multiple Debug shells in one sandbox<a class="headerlink" href="#multiple-debug-shells-in-one-sandbox" title="Link to this heading">ðŸ”—</a></h2>
<p>Sometimes it can be helpful to have multiple debugging shells at a
time in the same sandox. For example, some debugging commands such as
<a class="reference external" href="https://learn.microsoft.com/en-us/dotnet/core/diagnostics/dotnet-dump">dotnet-dump</a>
expect to be given an identifier for a running process that it will
connect to for debugging. This essentially requires multiple instances
of the <a class="reference internal" href="#debug-shell"><span class="std std-ref">Debug shell</span></a>, one to run the app, and one for
running the debugging tool.</p>
<p>To accomplish this, locate either the instance or process ID of an
existing debug shell with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak ps
</pre></div>
</div>
<p>Then you can enter this same sandbox from a new terminal window using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak enter &lt;instance id&gt; /bin/bash
</pre></div>
</div>
<p>Note that this second shell likely will not be configured identically
to the original debug shell (for example it will likely have different
environment variables such as PATH).</p>
<p>You can verify whether both the shells are indeed in the same sandbox by
checking the namespaces visible in each debug shell and
verifying that they are the same. The easiest way to do this is to list
the visible namespaces using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ lsns --type pid
</pre></div>
</div>
</section>
<section id="creating-a-debug-extension">
<h2>Creating a Debug extension<a class="headerlink" href="#creating-a-debug-extension" title="Link to this heading">ðŸ”—</a></h2>
<p>Like many other packaging systems, Flatpak separates bulky debug information
from regular content and ships it separately, in a Debug  extension.</p>
<p>When an application is built, <code class="docutils literal notranslate"><span class="pre">flatpak-builder</span></code> automatically
creates a Debug extension. This can be disabled with the <code class="docutils literal notranslate"><span class="pre">no-debuginfo</span></code>
option.</p>
<p>To install the Debug extension created locally, pass <code class="docutils literal notranslate"><span class="pre">--install</span></code>
to <code class="docutils literal notranslate"><span class="pre">flatpak-builder</span></code> which will set up a new remote for the build. The
remotes available can be checked with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak remotes --columns=name,url
</pre></div>
</div>
<p>Then install the Debug extension from that remote:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak install foo-origin $FLATPAK_ID.Debug
</pre></div>
</div>
</section>
<section id="overriding-sandbox-permissions">
<h2>Overriding sandbox permissions<a class="headerlink" href="#overriding-sandbox-permissions" title="Link to this heading">ðŸ”—</a></h2>
<p>It is sometimes useful to have extra permissions in a sandbox when debugging.
This can be achieved using the various sandbox options that are accepted by
the run command. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak run --devel --command=sh --system-talk-name=org.freedesktop.login1 &lt;application-id&gt;
</pre></div>
</div>
<p>This command runs a shell in the sandbox for the given application, granting it
system bus access to the bus name owned by logind.</p>
</section>
<section id="inspecting-portal-permissions">
<h2>Inspecting portal permissions<a class="headerlink" href="#inspecting-portal-permissions" title="Link to this heading">ðŸ”—</a></h2>
<p>Flatpak has a number of commands that allow to manage portal permissions
for applications.</p>
<p>To see all portal permissions of an application, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak permission-show &lt;application-id&gt;
</pre></div>
</div>
<p>To reset all portal permissions of an application, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak permission-reset &lt;application-id&gt;
</pre></div>
</div>
</section>
<section id="interacting-with-running-sandboxes">
<h2>Interacting with running sandboxes<a class="headerlink" href="#interacting-with-running-sandboxes" title="Link to this heading">ðŸ”—</a></h2>
<p>You can see all the apps that are currently running in Flatpak sandboxes
(since 1.2):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak ps
</pre></div>
</div>
<p>And, if you need to, you can terminate one by force (since 1.2):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ flatpak kill &lt;application-id&gt;
</pre></div>
</div>
</section>
<section id="audit-session-or-system-bus-traffic">
<h2>Audit session or system bus traffic<a class="headerlink" href="#audit-session-or-system-bus-traffic" title="Link to this heading">ðŸ”—</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">--socket=session-bus</span></code> or a <code class="docutils literal notranslate"><span class="pre">--socket=system-bus</span></code> permission must
not be present for the logging to work.</p>
<p>Session bus traffic can be audited by passing <code class="docutils literal notranslate"><span class="pre">--log-session-bus</span></code> to
<code class="docutils literal notranslate"><span class="pre">flatpak</span> <span class="pre">run</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flatpak</span> <span class="n">run</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">session</span><span class="o">-</span><span class="n">bus</span> <span class="o">&lt;</span><span class="n">application</span><span class="o">-</span><span class="nb">id</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This can be useful to figure out the bus names used by an application
and the corresponding <code class="docutils literal notranslate"><span class="pre">--talk-name</span></code> or <code class="docutils literal notranslate"><span class="pre">--own-name</span></code> permissions
required:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flatpak</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">session</span><span class="o">-</span><span class="n">bus</span> <span class="n">run</span> <span class="o">&lt;</span><span class="n">application</span><span class="o">-</span><span class="nb">id</span><span class="o">&gt;|</span> <span class="n">grep</span> <span class="s1">&#39;(required 1)&#39;</span>
</pre></div>
</div>
<p>Similarly, system bus traffic can be audited by passing <code class="docutils literal notranslate"><span class="pre">--log-system-bus</span></code>
to <code class="docutils literal notranslate"><span class="pre">flatpak</span> <span class="pre">run</span></code>. This also requires a system bus name to be present
in the permissions. If not a bogus bus name can be passed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flatpak</span> <span class="n">run</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">system</span><span class="o">-</span><span class="n">bus</span> <span class="o">--</span><span class="n">system</span><span class="o">-</span><span class="n">talk</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="n">org</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">foo</span> <span class="o">&lt;</span><span class="n">application</span><span class="o">-</span><span class="nb">id</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="publishing.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Publishing</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="extension.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Extensions</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2017-2025, Flatpak Team. Licensed under Creative Commons Attribution 4.0 International License.
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Debugging</a><ul>
<li><a class="reference internal" href="#debug-packages">Debug packages</a></li>
<li><a class="reference internal" href="#debug-shell">Debug shell</a></li>
<li><a class="reference internal" href="#using-gdb-in-the-sandbox">Using GDB in the sandbox</a></li>
<li><a class="reference internal" href="#getting-stacktraces-from-a-crash">Getting stacktraces from a crash</a></li>
<li><a class="reference internal" href="#using-other-debugging-tools">Using other debugging tools</a></li>
<li><a class="reference internal" href="#multiple-debug-shells-in-one-sandbox">Multiple Debug shells in one sandbox</a></li>
<li><a class="reference internal" href="#creating-a-debug-extension">Creating a Debug extension</a></li>
<li><a class="reference internal" href="#overriding-sandbox-permissions">Overriding sandbox permissions</a></li>
<li><a class="reference internal" href="#inspecting-portal-permissions">Inspecting portal permissions</a></li>
<li><a class="reference internal" href="#interacting-with-running-sandboxes">Interacting with running sandboxes</a></li>
<li><a class="reference internal" href="#audit-session-or-system-bus-traffic">Audit session or system bus traffic</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=7d86a446"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/translations.js?v=beaddf03"></script>
    </body>
</html>